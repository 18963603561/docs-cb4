<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="groups">
 
 <title>
  Groups
 </title>
 
 <shortdesc>
  Individual server-nodes can be assigned to specific <i>groups</i>, within
  a Couchbase Cluster. This allows <i>active</i> vBuckets to be maintained on a different group
  from that of their corresponding <i>replica</i> vBuckets; so that even
  if one group goes offline, bucket-data remains available on another group.
 </shortdesc>
 
 <body>
  
  <section id="understanding-groups">
   <title>
    Understanding Groups
   </title>
   
   <p>
    <i>Groups</i> provide enhanced availability: each group is administrator-defined
    to contain a number of nodes within a given Couchbase Cluster. Once rebalance occurs, the active
    and replica vBuckets for a defined bucket are maintained on separate groups. This allows
    <i>Group Failover</i> to be enabled, so that in the event of an entire group going offline,
    its replica vBuckets (maintained on other groups within the cluster), are promoted to active status, and
    their data thereby kept accessible.
   </p>
   
   <p>
    If, within a multi-node group, a single node goes offline, provided 
   </p>
   
   <p>
    Use of groups provides optimal data-protection when groups are assigned equal numbers of nodes; since this allows
    vBuckets to be distributed such that none
    ever occupies the same group as its associated active
    vBucket. By contrast, when groups are <i>not</i> assigned equal numbers of nodes,
    rebalance can only produce a <i>best effort</i> redistribution of replica vBuckets: this may result
    in cases of replica vBuckets
    occupying the same group as their associated active vBuckets; meaning that data 
    may be lost if such a group becomes unavailable.
   </p>
   
   <p>
    
   </p>
    
  </section>
  
  <section id="vbucket-distribution-across-equal-groups">
   <title>
    vBucket Distribution Across Equal Groups
   </title>
   
   <p>
    The following illustration shows how vBuckets are distributed across two
    groups; each group containing four of their cluster's eight nodes.   
   </p>
   
   <p>
    <image href="./images/groups-two-equal.png" width="780" align="left" id="groups_two_equal"/>
   </p>
   
   <p>
    Note that Group 2 contains all the replica vBuckets that correspond to active vBuckets on Group 1;
    while conversely, Group 1 contains all the replica vBuckets that correspond to active vBuckets on
    Group 2.
    
   </p>
  </section>
  
  <section id="vbucket-distribution-across-unequal-groups">
   <title>
    vBucket Distribution Across Unequal Groups
   </title>
   
   <p>
    The following illustration shows how vBuckets are distributed across two groups; one
    containing five nodes, the other four.
   </p>
   
   <p>
    <image href="./images/groups-two-unequal.png" width="780" align="left" id="groups_two_unequal"/>
   </p>
   
   <p>
    Note that once again, Group 1 contains all the replica vBuckets that correspond to active vBuckets
    on Group 2. However, because the groups contain unequal number of nodes, in this case, Group 2 not
    only contains all the replica vBuckets that correspond to active vBuckets on Group 1; but also contains
    all the replica vBuckets for its own additional node, Server 9, distributed across its other nodes,
    Servers 5 to 8. Server 9 contains its own active vBuckets, plus replica vBuckets for Group 1.
   </p>
   
   
  </section>
  

    
 </body>
 
</topic>
